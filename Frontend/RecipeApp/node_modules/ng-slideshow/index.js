import { ChangeDetectionStrategy, Component, ElementRef, EventEmitter, Input, NgModule, NgZone, Output, ViewEncapsulation } from '@angular/core';
import { Store, StoreModule, combineReducers } from '@ngrx/store/index';
import { List, Map } from 'immutable';
import * as Immutable from 'immutable';
import { DomSanitizer } from '@angular/platform-browser';
import { CommonModule } from '@angular/common';
import 'hammerjs';
import { TruncateModule } from 'ng2-truncate/dist/index';

var SWIPE_ACTION = {
    LEFT: 'swipeleft',
    RIGHT: 'swiperight'
};

var DOM_CLASSES = {
    ACTIVE: 'active',
    SLIDE_IN: 'slide-in',
    SLIDE_OUT_RIGHT: 'slide-out-right',
    SLIDE_OUT_LEFT: 'slide-out-left',
    LEFT: 'left',
    RIGHT: 'right',
    NO_SCROLL_RIGHT: 'no-scroll-right',
    NO_SCROLL_LEFT: 'no-scroll-left',
    GRADIENT_MASK: 'gradient-mask',
    GRADIENT_MASK_LEFT: 'gradient-mask-left',
    GRADIENT_MASK_RIGHT: 'gradient-mask-right',
    GRADIENT_MASK_BOTH: 'gradient-mask-both',
    THUMBNAILS: 'thumbnails'
};

var SLIDE_DIRECTION = {
    NEXT: 'next',
    PREVIOUS: 'previous',
    RIGHT: 'right',
    LEFT: 'left'
};

var EVENT = {
    SLIDE_NEXT: 'slide-next',
    SLIDE_PREVIOUS: 'slide-previous',
    ACTIVE_TRANSITION_COMPLETE: 'active-transition-complete',
    SWIPE_NEXT: 'swipe-next',
    SWIPE_PREVIOUS: 'swipe-previous',
    MOVE_LEFT: 'move-left',
    MOVE_RIGHT: 'move-right',
    SLIDE_LEFT: 'slide-left',
    SLIDE_RIGHT: 'slide-right',
    SLIDE_IN: 'slide-in',
    SLIDE_IN_BY_INDEX: 'slide-in-by-index',
    MOVE_THUMBNAILS_RIGHT: 'move-thumbnails-right',
    MOVE_THUMBNAILS_LEFT: 'move-thumbnails-left',
    LOADING: 'loading-change',
    OFFSET: 'offset-change'
};

/**
 * Slideshow states
 *
 */
var LOADING = 'LOADING';
var SLIDING = 'SLIDING';
var READY = 'READY';
/**
 * State reducer
 *
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
function stateReducer(state, action) {
    if (state === void 0) { state = 'LOADING'; }
    switch (action.type) {
        case LOADING:
            return LOADING;
        case SLIDING:
            return SLIDING;
        case READY:
            return READY;
        default:
            return state;
    }
}

/**
 * Slideshow index state
 *
 */
var INCREMENT = 'INCREMENT';
var DECREMENT = 'DECREMENT';
var RESET = 'RESET';
/**
 * State reducer
 *
 * @param {?=} state
 * @param {?=} action
 * @return {?}
 */
function indexReducer(state, action) {
    if (state === void 0) { state = 0; }
    switch (action.type) {
        case INCREMENT:
            return state + 1;
        case DECREMENT:
            return state - 1;
        case RESET:
            return 0;
        default:
            return state;
    }
}

var OPTIONS = {
    SHOW_THUMBNAILS: 'showThumbnails',
    THUMBNAIL_WIDTH: 'thumbnailWidth'
};

var SlideshowComponent = (function () {
    /**
     * @param {?} domSanitizer
     * @param {?} store
     * @param {?} elementRef
     * @param {?} zone
     */
    function SlideshowComponent(domSanitizer, store, elementRef, zone) {
        var _this = this;
        this.domSanitizer = domSanitizer;
        this.store = store;
        this.elementRef = elementRef;
        this.zone = zone;
        /**
         * The immutable list of images
         *
         */
        this.images = List();
        /**
         * Configurable options for the slideshow
         *
         */
        this.options = Map();
        /**
         * Event dispatcher
         *
         */
        this.eventDispatcher = new EventEmitter();
        /**
         * Thumbnail offset
         *
         */
        this.thumbnailOffset = 0;
        /**
         * A list of DOM Elements
         *
         */
        this.domElements = [];
        this.offsetStateSubscription = this.store.select('index');
        this.loadingStateSubscription = this.store.select('state');
        this.loadingStateSubscription.subscribe(function (appState) {
            _this.loadingStatus = appState;
            _this.eventDispatcher.emit({ label: EVENT.LOADING, metadata: _this.loadingStatus });
        });
        this.offsetStateSubscription.subscribe(function (appState) {
            _this.offsetStatus = appState;
            _this.eventDispatcher.emit({ label: EVENT.OFFSET, metadata: _this.loadingStatus });
        });
    }
    /**
     * After view is checked event
     *
     * @return {?}
     */
    SlideshowComponent.prototype.ngAfterViewChecked = function () {
        if (this.options.get(OPTIONS.SHOW_THUMBNAILS)) {
            this.initializeThumbnailContainer();
        }
    };
    /**
     * Moves a slide outside of the Angular Zone
     *
     * @param {?=} direction
     * @param {?=} evt
     * @return {?}
     */
    SlideshowComponent.prototype.moveSlide = function (direction, evt) {
        var _this = this;
        if (direction === void 0) { direction = 'next'; }
        if (evt) {
            evt.preventDefault();
        }
        this.zone.runOutsideAngular(function () { return _this.slide(direction); });
    };
    /**
     * Slides an Element given a direction
     *
     * @param {?=} direction
     * @return {?}
     */
    SlideshowComponent.prototype.slide = function (direction) {
        if (direction === void 0) { direction = 'next'; }
        var /** @type {?} */ activeElement = this.elementRef.nativeElement.querySelector('li.' + DOM_CLASSES.ACTIVE);
        if (!activeElement) {
            throw new Error('No active element defined');
        }
        var /** @type {?} */ slideElement = direction === SLIDE_DIRECTION.NEXT ?
            activeElement.nextElementSibling : activeElement.previousElementSibling;
        if (!slideElement || this.loadingStatus === SLIDING) {
            return;
        }
        this.loadingStateSubscription.dispatch({ type: SLIDING });
        this.offsetStateSubscription.dispatch({ type: direction === SLIDE_DIRECTION.NEXT ? INCREMENT : DECREMENT });
        activeElement.classList.remove(DOM_CLASSES.ACTIVE);
        activeElement.classList
            .add(direction === SLIDE_DIRECTION.NEXT ? DOM_CLASSES.SLIDE_OUT_LEFT : DOM_CLASSES.SLIDE_OUT_RIGHT);
        slideElement.classList.add(DOM_CLASSES.ACTIVE, DOM_CLASSES.SLIDE_IN);
        this.eventDispatcher.emit({ label: direction === SLIDE_DIRECTION.NEXT ? EVENT.SLIDE_NEXT : EVENT.SLIDE_PREVIOUS });
    };
    /**
     * On the active element transition end event
     *
     * @param {?} evt
     * @return {?} void
     */
    SlideshowComponent.prototype.onActiveTransitionEnd = function (evt) {
        var _this = this;
        this.zone.runOutsideAngular(function () { return _this.clearActiveElement(evt.currentTarget); });
    };
    /**
     * Clears the current active element
     *
     * @param {?} target
     * @return {?}
     */
    SlideshowComponent.prototype.clearActiveElement = function (target) {
        if (target && !target.classList.contains('active')) {
            return;
        }
        var /** @type {?} */ activeElement = this.elementRef.nativeElement.querySelector('.' + DOM_CLASSES.ACTIVE);
        if (!activeElement) {
            throw new Error('No active element present');
        }
        var /** @type {?} */ nextElement = activeElement.nextElementSibling;
        var /** @type {?} */ previousElement = activeElement.previousElementSibling;
        activeElement.classList.remove(DOM_CLASSES.SLIDE_IN, DOM_CLASSES.LEFT, DOM_CLASSES.RIGHT, DOM_CLASSES.SLIDE_OUT_LEFT, DOM_CLASSES.SLIDE_OUT_RIGHT);
        if (previousElement) {
            this.clearPreviousElement(previousElement);
        }
        if (nextElement) {
            this.clearNextElement(nextElement);
        }
        this.loadingStateSubscription.dispatch({ type: READY });
        this.eventDispatcher.emit({ label: EVENT.ACTIVE_TRANSITION_COMPLETE });
    };
    /**
     * Clears previous element
     *
     * @param {?} element
     * @return {?} void
     */
    SlideshowComponent.prototype.clearPreviousElement = function (element) {
        element.classList.add(DOM_CLASSES.LEFT);
        element.classList.remove(DOM_CLASSES.SLIDE_IN, DOM_CLASSES.RIGHT, DOM_CLASSES.SLIDE_OUT_LEFT, DOM_CLASSES.SLIDE_OUT_RIGHT);
    };
    /**
     * Clears next element
     *
     * @param {?} element
     * @return {?} void
     */
    SlideshowComponent.prototype.clearNextElement = function (element) {
        element.classList.add(DOM_CLASSES.RIGHT);
        element.classList.remove(DOM_CLASSES.SLIDE_IN, DOM_CLASSES.LEFT, DOM_CLASSES.SLIDE_OUT_LEFT, DOM_CLASSES.SLIDE_OUT_RIGHT);
    };
    /**
     * On swipe events
     *
     * @param {?=} action
     * @return {?} void
     */
    SlideshowComponent.prototype.swipe = function (action) {
        if (action === void 0) { action = SWIPE_ACTION.RIGHT; }
        if (action === SWIPE_ACTION.RIGHT) {
            this.moveSlide(SLIDE_DIRECTION.PREVIOUS);
        }
        else if (action === SWIPE_ACTION.LEFT) {
            this.moveSlide(SLIDE_DIRECTION.NEXT);
        }
        this.eventDispatcher.emit({ label: action === SWIPE_ACTION.RIGHT ? EVENT.SWIPE_PREVIOUS : EVENT.SWIPE_NEXT });
    };
    /**
     * Returns a HTML Element
     *
     * @param {?} selector
     * @param {?=} single
     * @return {?}
     */
    SlideshowComponent.prototype.getDomElement = function (selector, single) {
        if (single === void 0) { single = true; }
        var /** @type {?} */ search = this.domElements.filter(function (domElement) { return domElement.selector === selector; });
        var /** @type {?} */ elem;
        if (search.length > 0) {
            elem = search[0].elem;
        }
        else {
            elem = single ? this.elementRef.nativeElement.querySelector(selector)
                : this.elementRef.nativeElement.querySelectorAll(selector);
            this.domElements.push({ selector: selector, elem: elem });
        }
        return elem;
    };
    /**
     * Sets an element to the left
     *
     * @param {?} elem
     * @return {?}
     */
    SlideshowComponent.prototype.moveLeft = function (elem) {
        elem.classList.remove(DOM_CLASSES.RIGHT, DOM_CLASSES.ACTIVE);
        elem.classList.add(DOM_CLASSES.LEFT);
        this.eventDispatcher.emit({ label: EVENT.MOVE_LEFT });
    };
    /**
     * Sets an element to the right
     *
     * @param {?} elem
     * @return {?}
     */
    SlideshowComponent.prototype.moveRight = function (elem) {
        elem.classList.remove(DOM_CLASSES.LEFT, DOM_CLASSES.ACTIVE);
        elem.classList.add(DOM_CLASSES.RIGHT);
        this.eventDispatcher.emit({ label: EVENT.MOVE_RIGHT });
    };
    /**
     * Slides an element to the left
     *
     * @param {?} elem
     * @return {?}
     */
    SlideshowComponent.prototype.slideLeft = function (elem) {
        elem.classList.add(DOM_CLASSES.ACTIVE);
        elem.classList.remove(DOM_CLASSES.ACTIVE);
        elem.classList.add(DOM_CLASSES.SLIDE_OUT_LEFT);
        this.eventDispatcher.emit({ label: EVENT.SLIDE_LEFT });
    };
    /**
     * Slides an element to the right
     *
     * @param {?} elem
     * @return {?}
     */
    SlideshowComponent.prototype.slideRight = function (elem) {
        elem.classList.add(DOM_CLASSES.ACTIVE);
        elem.classList.remove(DOM_CLASSES.ACTIVE);
        elem.classList.add(DOM_CLASSES.SLIDE_OUT_RIGHT);
        this.eventDispatcher.emit({ label: EVENT.SLIDE_RIGHT });
    };
    /**
     * Slides in an element
     *
     * @param {?} elem
     * @return {?}
     */
    SlideshowComponent.prototype.slideIn = function (elem) {
        elem.classList.add(DOM_CLASSES.ACTIVE, DOM_CLASSES.SLIDE_IN);
        this.eventDispatcher.emit({ label: EVENT.SLIDE_IN });
    };
    /**
     * Show an element given its index
     *
     * @param {?} index
     * @return {?} void
     */
    SlideshowComponent.prototype.showByIndex = function (index) {
        var _this = this;
        this.zone.runOutsideAngular(function () { return _this.slideInElementByIndex(index); });
    };
    /**
     * Slides in an element given its index
     *
     * @param {?} index
     * @return {?}
     */
    SlideshowComponent.prototype.slideInElementByIndex = function (index) {
        var /** @type {?} */ list = this.getDomElement('li', false);
        var /** @type {?} */ currentIndex = this.offsetStatus;
        for (var /** @type {?} */ i = 0; i < index; i++) {
            this.moveLeft(list[i]);
        }
        for (var /** @type {?} */ i = index + 1; i < list.length; i++) {
            this.moveRight(list[i]);
        }
        if (index > currentIndex) {
            this.offsetStateSubscription.dispatch({ type: RESET });
            for (var /** @type {?} */ i = 0; i < index; i++) {
                this.offsetStateSubscription.dispatch({ type: INCREMENT });
            }
            this.replaceActiveElement(list[currentIndex], list[index], SLIDE_DIRECTION.LEFT);
        }
        else {
            for (var /** @type {?} */ i = currentIndex; i > index; i--) {
                this.offsetStateSubscription.dispatch({ type: DECREMENT });
            }
            this.replaceActiveElement(list[currentIndex], list[index]);
        }
        this.eventDispatcher.emit({ label: EVENT.SLIDE_IN_BY_INDEX, metadata: { index: index } });
    };
    /**
     * Replaces current active element
     *
     * @param {?} activeElement
     * @param {?} replacementElement
     * @param {?=} direction
     * @return {?}
     */
    SlideshowComponent.prototype.replaceActiveElement = function (activeElement, replacementElement, direction) {
        if (direction === void 0) { direction = SLIDE_DIRECTION.RIGHT; }
        if (direction === SLIDE_DIRECTION.RIGHT) {
            this.slideRight(activeElement);
        }
        else {
            this.slideLeft(activeElement);
        }
        this.slideIn(replacementElement);
    };
    /**
     * Initializes the thumbnails container
     *
     * @return {?}
     */
    SlideshowComponent.prototype.initializeThumbnailContainer = function () {
        var /** @type {?} */ parent = this.elementRef.nativeElement.querySelector('.' + DOM_CLASSES.THUMBNAILS);
        var /** @type {?} */ container = parent.querySelector('ul');
        var /** @type {?} */ containerWidth = container.offsetWidth;
        var /** @type {?} */ totalImages = this.images.count();
        var /** @type {?} */ thumbnailWidth = this.options.get(OPTIONS.THUMBNAIL_WIDTH);
        if (!thumbnailWidth || isNaN(thumbnailWidth)) {
            throw new Error('Thumbnail width option is not defined');
        }
        var /** @type {?} */ numElements = Math.ceil(containerWidth / thumbnailWidth);
        if (totalImages > numElements) {
            parent.classList.remove(DOM_CLASSES.NO_SCROLL_RIGHT);
        }
        else {
            parent.classList.add(DOM_CLASSES.NO_SCROLL_RIGHT);
        }
    };
    /**
     * Slides thumbnails to a given direction
     *
     * @param {?} container
     * @param {?=} direction
     * @return {?}
     */
    SlideshowComponent.prototype.slideThumbnails = function (container, direction) {
        if (direction === void 0) { direction = SLIDE_DIRECTION.NEXT; }
        var /** @type {?} */ parent = this.elementRef.nativeElement.querySelector('.' + DOM_CLASSES.THUMBNAILS);
        var /** @type {?} */ containerWidth = container.offsetWidth;
        var /** @type {?} */ children = container.querySelectorAll('li');
        var /** @type {?} */ thumbnailWidth = this.options.get(OPTIONS.THUMBNAIL_WIDTH);
        var /** @type {?} */ numElements = Math.ceil(containerWidth / thumbnailWidth);
        var /** @type {?} */ mask = parent.querySelector('.' + DOM_CLASSES.GRADIENT_MASK);
        var /** @type {?} */ distance = (this.thumbnailOffset + 1) * numElements * thumbnailWidth - thumbnailWidth;
        var /** @type {?} */ curLeft = parseInt(container.getAttribute('data-left'), 10);
        var /** @type {?} */ newLeft = direction === SLIDE_DIRECTION.NEXT ? (curLeft - distance) + 'px' : (curLeft + distance) + 'px';
        var /** @type {?} */ page = parseInt(container.getAttribute('data-page'), 10);
        var /** @type {?} */ newPage = direction === SLIDE_DIRECTION.NEXT ? page + 1 : page - 1;
        var /** @type {?} */ totalPages = Math.round(children.length / numElements);
        if (newPage > totalPages) {
            parent.classList.add(DOM_CLASSES.NO_SCROLL_RIGHT);
            parent.classList.remove(DOM_CLASSES.NO_SCROLL_LEFT);
            mask.classList.remove(DOM_CLASSES.GRADIENT_MASK_BOTH, DOM_CLASSES.GRADIENT_MASK_RIGHT);
            mask.classList.add(DOM_CLASSES.GRADIENT_MASK_LEFT);
        }
        else if (newPage === 1) {
            parent.classList.add(DOM_CLASSES.NO_SCROLL_LEFT);
            mask.classList.remove(DOM_CLASSES.GRADIENT_MASK_BOTH, DOM_CLASSES.GRADIENT_MASK_LEFT);
            mask.classList.add(DOM_CLASSES.GRADIENT_MASK_RIGHT);
        }
        else {
            parent.classList.remove(DOM_CLASSES.NO_SCROLL_RIGHT, DOM_CLASSES.NO_SCROLL_LEFT);
            mask.classList.remove(DOM_CLASSES.GRADIENT_MASK_RIGHT, DOM_CLASSES.GRADIENT_MASK_LEFT);
            mask.classList.add(DOM_CLASSES.GRADIENT_MASK_BOTH);
        }
        container.style.left = newLeft;
        container.setAttribute('data-left', newLeft);
        container.setAttribute('data-page', newPage + '');
    };
    /**
     * Slides thumbnails to right
     *
     * @param {?} container
     * @return {?}
     */
    SlideshowComponent.prototype.moveThumbnailsRight = function (container) {
        var _this = this;
        this.zone.runOutsideAngular(function () { return _this.slideThumbnails(container, SLIDE_DIRECTION.NEXT); });
        this.eventDispatcher.emit({ label: EVENT.MOVE_THUMBNAILS_RIGHT });
    };
    /**
     * Slides thumbnails to left
     *
     * @param {?} container
     * @return {?}
     */
    SlideshowComponent.prototype.moveThumbnailsLeft = function (container) {
        var _this = this;
        this.zone.runOutsideAngular(function () { return _this.slideThumbnails(container, SLIDE_DIRECTION.PREVIOUS); });
        this.eventDispatcher.emit({ label: EVENT.MOVE_THUMBNAILS_LEFT });
    };
    /**
     * Gets a protected safe url to use
     *
     * @param {?} imageUrl
     * @return {?}
     */
    SlideshowComponent.prototype.getSafeUrl = function (imageUrl) {
        return this.domSanitizer.bypassSecurityTrustStyle("url(" + imageUrl + ")");
    };
    return SlideshowComponent;
}());
SlideshowComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng-slideshow',
                template: "<section class=\"ng-slideshow\" (swipeleft)=\"swipe($event.type)\" (swiperight)=\"swipe($event.type)\"> <div class=\"mask\"> <ul> <li *ngFor=\"let image of images; let i = index\" [class.active]=\"i === 0\" (transitionend)=\"onActiveTransitionEnd($event)\"> <a href=\"#\" [style.background-image]=\"getSafeUrl(image.url)\"></a> <div class=\"gradient\" *ngIf=\"image.title || options.get('showDots')\"></div> <span *ngIf=\"image.title\"><em>{{image.title | truncate : 200}}</em></span> </li> </ul> <nav> <a href=\"#\" class=\"prev\" (click)=\"moveSlide('previous', $event)\" *ngIf=\"offsetStatus > 0\"></a> <a href=\"#\" class=\"next\" (click)=\"moveSlide('next', $event)\" *ngIf=\"offsetStatus < images.count() - 1\"></a> </nav> <div class=\"nav-dots\" *ngIf=\"options.get('showDots')\"> <span class=\"nav-dot\" *ngFor=\"let image of images; let offset = index\" [class.active]=\"offset === offsetStatus\" (click)=\"showByIndex(offset)\" id=\"{{offset}}\"> </span> </div> </div> <div *ngIf=\"options.get('showThumbnails')\" class=\"thumbnails no-scroll-left no-scroll-right\"> <ul #thumbnailsContainer data-left=\"0\" [attr.data-right]=\"images.count()\" data-page=\"1\"> <li *ngFor=\"let image of images; let thumbnailOffset = index\" id=\"thumbnail-{{thumbnailOffset}}\" [style.width.px]=\"options.get('thumbnailWidth')\" [style.left.px]=\"thumbnailOffset * options.get('thumbnailWidth')\" [class.active]=\"thumbnailOffset === offsetStatus\"> <a href=\"#\" (click)=\"showByIndex(thumbnailOffset)\" [style.background-image]=\"getSafeUrl(image.url)\"></a> </li> </ul> <div class=\"gradient-mask gradient-mask-right\"></div> <nav> <a href=\"#\" class=\"prev\" (click)=\"moveThumbnailsLeft(thumbnailsContainer)\"></a> <a href=\"#\" class=\"next\" (click)=\"moveThumbnailsRight(thumbnailsContainer)\"></a> </nav> </div> </section> ",
                styles: [".ng-slideshow { display: -webkit-box; display: -webkit-flex; display: -moz-flex; display: -ms-flexbox; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; -webkit-flex-direction: column; -moz-flex-direction: column; -ms-flex-direction: column; flex-direction: column; background: transparent; width: 100%; height: 100%; margin: 40px auto 0; overflow: visible; position: relative; } .ng-slideshow .mask { display: -webkit-box; display: -webkit-flex; display: -moz-flex; display: -ms-flexbox; display: flex; position: relative; overflow: hidden; height: 100%; } .ng-slideshow .gradient { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.3) 10%, transparent 30%), linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.2) 80%, rgba(0, 0, 0, 0.6) 100%); } .ng-slideshow ul { margin: 0; padding: 0; width: 100%; height: 100%; } .ng-slideshow ul li { padding: 0; margin: 0; list-style-type: none; position: absolute; top: 0; left: 100%; width: 100%; height: 100%; background-position: center; color: #fff; background-color: #fff; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTIwcHgnIGhlaWdodD0nMTIwcHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiBjbGFzcz0idWlsLWRlZmF1bHQiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJub25lIiBjbGFzcz0iYmsiPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMXMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzAwMDAwMCcgdHJhbnNmb3JtPSdyb3RhdGUoMzAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMC45MTY2NjY2NjY2NjY2NjY2cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjMDAwMDAwJyB0cmFuc2Zvcm09J3JvdGF0ZSg2MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjgzMzMzMzMzMzMzMzMzMzRzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDkwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nLTAuNzVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDEyMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjY2NjY2NjY2NjY2NjY2NjZzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDE1MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjU4MzMzMzMzMzMzMzMzMzRzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDE4MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDIxMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjQxNjY2NjY2NjY2NjY2NjdzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDI0MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjMzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMwMDAwMDAnIHRyYW5zZm9ybT0ncm90YXRlKDI3MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjI1cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjMDAwMDAwJyB0cmFuc2Zvcm09J3JvdGF0ZSgzMDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMC4xNjY2NjY2NjY2NjY2NjY2NnMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzAwMDAwMCcgdHJhbnNmb3JtPSdyb3RhdGUoMzMwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nLTAuMDgzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48L3N2Zz4=); } .ng-slideshow ul li.active { left: 0; } .ng-slideshow ul li.left { left: -100%; } .ng-slideshow ul li.right { left: 100%; } .ng-slideshow ul li.active.slide-in { left: 0; transition: left 0.5s cubic-bezier(0.42, 0, 0.58, 1); } .ng-slideshow ul li.slide-out-left { left: -100%; transition: left 0.5s cubic-bezier(0.42, 0, 0.58, 1); } .ng-slideshow ul li.slide-out-right { left: 100%; transition: left 0.5s cubic-bezier(0.42, 0, 0.58, 1); } .ng-slideshow ul li span { display: -webkit-box; display: -webkit-flex; display: -moz-flex; display: -ms-flexbox; display: flex; position: absolute; top: 0; width: 100%; } .ng-slideshow ul li span em { margin: 6px 10px; color: #fff; font-weight: normal; font-size: 0.8em; line-height: 1.2em; } .ng-slideshow ul a { display: block; background-size: cover; background-position: center; width: 100%; height: 100%; } .ng-slideshow nav { display: -webkit-box; display: -webkit-flex; display: -moz-flex; display: -ms-flexbox; display: flex; -webkit-box-align: center; -ms-flex-align: center; -webkit-align-items: center; -moz-align-items: center; align-items: center; -webkit-box-pack: justify; -ms-flex-pack: justify; -webkit-justify-content: space-between; -moz-justify-content: space-between; justify-content: space-between; position: absolute; top: 0; left: 0; width: 100%; height: 100%; } .ng-slideshow nav a { position: absolute; z-index: 9; text-decoration: none; color: #FFF; font-size: 100pt; text-align: center; line-height: 380px; text-shadow: 0 0 15px #777777; opacity: 0.5; transition: opacity .2s linear; height: 100%; width: 30px; } .ng-slideshow nav a:hover { opacity: 1; } .ng-slideshow nav a.next { right: 0; margin: 0 10px 0 0; background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI0MC44MjMgMjQwLjgyMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjQwLjgyMyAyNDAuODIzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBpZD0iQ2hldnJvbl9SaWdodF8xXyIgZD0iTTE4My4xODksMTExLjgxNkw3NC44OTIsMy41NTVjLTQuNzUyLTQuNzQtMTIuNDUxLTQuNzQtMTcuMjE1LDBjLTQuNzUyLDQuNzQtNC43NTIsMTIuNDM5LDAsMTcuMTc5ICAgbDk5LjcwNyw5OS42NzFsLTk5LjY5NSw5OS42NzFjLTQuNzUyLDQuNzQtNC43NTIsMTIuNDM5LDAsMTcuMTkxYzQuNzUyLDQuNzQsMTIuNDYzLDQuNzQsMTcuMjE1LDBsMTA4LjI5Ny0xMDguMjYxICAgQzE4Ny44ODEsMTI0LjMxNSwxODcuODgxLDExNi40OTUsMTgzLjE4OSwxMTEuODE2eiIgZmlsbD0iI0ZGRkZGRiIvPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=) no-repeat center/85%; } .ng-slideshow nav a.prev { left: 0; margin: 0 0 0 10px; background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI0MC44MjMgMjQwLjgyMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjQwLjgyMyAyNDAuODIzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBpZD0iQ2hldnJvbl9SaWdodCIgZD0iTTU3LjYzMywxMjkuMDA3TDE2NS45MywyMzcuMjY4YzQuNzUyLDQuNzQsMTIuNDUxLDQuNzQsMTcuMjE1LDBjNC43NTItNC43NCw0Ljc1Mi0xMi40MzksMC0xNy4xNzkgICBsLTk5LjcwNy05OS42NzFsOTkuNjk1LTk5LjY3MWM0Ljc1Mi00Ljc0LDQuNzUyLTEyLjQzOSwwLTE3LjE5MWMtNC43NTItNC43NC0xMi40NjMtNC43NC0xNy4yMTUsMEw1Ny42MjEsMTExLjgxNiAgIEM1Mi45NDIsMTE2LjUwNyw1Mi45NDIsMTI0LjMyNyw1Ny42MzMsMTI5LjAwN3oiIGZpbGw9IiNGRkZGRkYiLz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+) no-repeat center/85%; } .ng-slideshow .nav-dots { width: 100%; bottom: 10px; height: 11px; display: block; position: absolute; text-align: center; } .ng-slideshow .nav-dots .nav-dot { top: -5px; width: 11px; height: 11px; margin: 0 4px; position: relative; border-radius: 100%; display: inline-block; background-color: rgba(0, 0, 0, 0.6); transition: background 0.2s cubic-bezier(0.42, 0, 0.58, 1); } .ng-slideshow .nav-dots .nav-dot.active { background: rgba(255, 255, 255, 0.4); } .ng-slideshow .nav-dots .nav-dot.active:hover { background: rgba(255, 255, 255, 0.4); cursor: default; } .ng-slideshow .nav-dots .nav-dot:hover { cursor: pointer; background: rgba(0, 0, 0, 0.8); } .touchevents .ng-slideshow nav { display: none; } .ng-slideshow .thumbnails { position: relative; height: 100px; overflow: hidden; } .ng-slideshow .thumbnails .gradient-mask { position: absolute; pointer-events: none; top: 0; left: 0; width: 100%; z-index: 3; height: 100%; } .ng-slideshow .thumbnails .gradient-mask-both { background-image: linear-gradient(to left, transparent 0%, transparent 95%, black 100%), linear-gradient(to right, transparent 0%, transparent 95%, black 100%); } .ng-slideshow .thumbnails .gradient-mask-left { background-image: linear-gradient(to left, transparent 0%, transparent 85%, black 100%); } .ng-slideshow .thumbnails .gradient-mask-right { background-image: linear-gradient(to right, transparent 0%, transparent 85%, black 100%); } .ng-slideshow .thumbnails ul { z-index: 2; position: absolute; top: 0; left: 0; transition: left .4s ease-out; } .ng-slideshow .thumbnails ul li { width: 100px; left: auto; z-index: 2; background-size: 50%; } .ng-slideshow .thumbnails .next, .ng-slideshow .thumbnails .prev { background-size: 65%; } .ng-slideshow .thumbnails.no-scroll-right nav .next { background: none; } .ng-slideshow .thumbnails.no-scroll-right .gradient-mask-right { background-image: none; } .ng-slideshow .thumbnails.no-scroll-left nav .prev { background: none; } .ng-slideshow .thumbnails.no-scroll-left .gradient-mask-left { background-image: none; } "],
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush
            },] },
];
/**
 * @nocollapse
 */
SlideshowComponent.ctorParameters = function () { return [
    { type: DomSanitizer, },
    { type: Store, },
    { type: ElementRef, },
    { type: NgZone, },
]; };
SlideshowComponent.propDecorators = {
    'images': [{ type: Input },],
    'options': [{ type: Input },],
    'eventDispatcher': [{ type: Output },],
};

var reducers = { state: stateReducer, index: indexReducer };
var productionReducer = combineReducers(reducers);
/**
 * @param {?} state
 * @param {?} action
 * @return {?}
 */
function reducer(state, action) {
    return productionReducer(state, action);
}
var SlideshowModule = (function () {
    function SlideshowModule() {
    }
    return SlideshowModule;
}());
SlideshowModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    TruncateModule,
                    StoreModule.provideStore(reducer)
                ],
                declarations: [SlideshowComponent],
                exports: [SlideshowComponent]
            },] },
];
/**
 * @nocollapse
 */
SlideshowModule.ctorParameters = function () { return []; };

export { SlideshowComponent, reducer, SlideshowModule };
